- id: bonus_room_enterance_light_on_at_sunset
  alias: Bonus Room Enterence Light - Evening On
  description: Turn on Bonus Room Enterence Light at sunset
  trigger:
    platform: sun
    event: sunset
    offset: 00:10:00
  action:
    service: homeassistant.turn_on
    entity_id: switch.bonus_room_enterance_light
- id: salt_lamp_evening_on
  alias: Salt Lamp - Evening On
  description: Turn on Salt Lamp after sunset
  trigger:
  - platform: sun
    event: sunset
    offset: 01:50:00
  action:
  - service: homeassistant.turn_on
    entity_id: switch.salt_lamp
  mode: single
- id: kitchen_light_evening_on
  alias: Kitchen Light - Evening On
  description: Turn on Kitchen Light at sunset
  trigger:
    platform: sun
    event: sunset
    offset: -00:30:00
  action:
    service: homeassistant.turn_on
    entity_id: switch.kitchen_light
- id: plant_light_morning_on
  alias: Plant Light - Morning On
  description: Turn on Plant Light after sunrise
  trigger:
    platform: sun
    event: sunrise
    offset: 00:30:00
  action:
    service: homeassistant.turn_on
    #entity_id: switch.plant_light
    entity_id: switch.plant_light
- id: plant_light_evening_off
  alias: plant Light - Evening Off
  description: Turn off Plant Light before sunset
  trigger:
    platform: sun
    event: sunset
    offset: -00:30:00
  action:
    service: homeassistant.turn_off
    #entity_id: switch.plant_light
    entity_id: switch.plant_light
- id: salt_lamp_night_off
  alias: Salt Lamp - Night Off
  description: Turn off Salt Lamp at night
  trigger:
    platform: time
    at: '23:59:00'
  action:
    service: homeassistant.turn_off
    entity_id: switch.salt_lamp
- id: kitchen_light_night_off
  alias: Kitchen Light - Night Off
  description: Turn off Kitchen Light at night
  trigger:
    platform: time
    at: '23:59:00'
  action:
    service: homeassistant.turn_off
    entity_id: switch.kitchen_light
- id: external_lights_dark_on
  alias: External Lights - Evening On
  description: Turn on External Lights at dark
  trigger:
    platform: sun
    event: sunset
    offset: 00:35:00
  action:
    service: homeassistant.turn_on
    entity_id: switch.external_lights
- id: external_lights_night_off
  alias: External Light - Night Off
  description: Turn off External Lights at midnight
  trigger:
    platform: time
    at: '23:59:00'
  action:
    service: homeassistant.turn_off
    entity_id: switch.external_lights
- id: garage_door_delayed_off
  alias: Back Garage Door - Delayed Off
  description: Turn off Garage Door after two hours
  trigger:
    platform: state
    to: 'on'
    entity_id: switch.garage_door
  action:
  - service: homeassistant.turn_on
    entity_id: switch.garage_door
  - delay: 02:00:00
  - service: homeassistant.turn_off
    entity_id: switch.garage_door
- id: ariving_home_turn_on_external_lights
  alias: Ariving home, turn on external lights
  description: 'Someone is ariving home, turn on the external lights for 10 minutes.'
  trigger:
    platform: state
    entity_id: person.StyxUT, person.traci, person.samantha
  condition:
    - condition: template
      value_template: "{{ trigger.from_state.state != trigger.to_state.state }}"
    - condition: state
      entity_id: sun.sun
      state: "below_horizon"
    - condition: state
      entity_id: switch.external_lights
      state: 'off'
  action:
    - service: homeassistant.turn_on
      entity_id: switch.external_lights
    - delay: 00:10:00
    - service: homeassistant.turn_off
      entity_id: switch.external_lights
- id: notify_person_is_ariving_home
  alias: Notify when someone enters the Home Area
  description: 'Send a notification when someone enters the Home Area'
  trigger:
    platform: state
    entity_id: person.StyxUT, person.traci, person.samantha
  condition:
    - condition: template
      value_template: "{{ trigger.from_state.state != trigger.to_state.state }}"
    - condition: template
      value_template: "{{ trigger.to_state == 'Home Area' }}"
  action:
    - service: notify.mobile_app_erics_iphone
      data_template:
        title: 'Arriving Home {{ states.sensor.time.state }}'
        message: "{{ trigger.to_state.attributes.friendly_name }} is arriving home."

- id: backyard_motion_detected
  alias: "Backyard motion detected, turn on deck light"
  trigger:
    - platform: event
      event_type: nest_event
      event_data:
        device_id: camera.backyard
        type: camera_motion
  action:
    - service: homeassistant.turn_on
      entity_id: switch.deck_light
    - delay: 00:10:00
    - service: homeassistant.turn_on
      entity_id: switch.deck_light

- id: thermostat_night_temperature
  alias: Thermostat - set nighttime temperature range
  description: Set the thermostat the nighttime temperature range
  trigger:
  - platform: time
    at: 00:05:00
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.hallway
      target_temp_high: 83
      target_temp_low: 55
  - service: climate.set_hvac_mode
    data:
      entity_id: climate.hallway
      hvac_mode: heat_cool
  mode: single
- id: thermostat_day_temperature
  alias: Thermostat - set daytime temperature range
  description: Set the thermostat the daytime temperature range
  trigger:
  - platform: time
    at: 06:30:00
  action:
  - service: climate.set_temperature
    data:
      entity_id: climate.hallway
      target_temp_high: 83
      target_temp_low: 64
  - service: climate.set_hvac_mode
    data:
      entity_id: climate.hallway
      hvac_mode: heat_cool
  mode: single
